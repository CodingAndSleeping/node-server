"use strict";(self["webpackChunkmy_blog"]=self["webpackChunkmy_blog"]||[]).push([[39],{6039:function(t,e,l){l.r(e),l.d(e,{default:function(){return u}});var s=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"blog"},[l("h1",[t._v("修改博客")]),l("div",{staticClass:"title"},[l("label",[t._v("博客标题")]),l("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.title,expression:"blog.title"}],attrs:{type:"text"},domProps:{value:t.blog.title},on:{input:function(e){e.target.composing||t.$set(t.blog,"title",e.target.value)}}})]),l("div",{staticClass:"content"},[l("label",[t._v("博客内容")]),l("div",{staticClass:"editor"},[l("mavon-editor",{attrs:{scrollStyle:!0,ishljs:!0},on:{change:t.change,imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.mavonValue,callback:function(e){t.mavonValue=e},expression:"mavonValue"}})],1)]),l("div",{staticClass:"label"},[l("label",[t._v("添加标签:")]),l("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.blog.labels,callback:function(e){t.$set(t.blog,"labels",e)},expression:"blog.labels"}},t._l(t.options,(function(t){return l("el-option",{key:t.id,attrs:{label:t.label,value:t.value}})})),1)],1),l("el-button",{attrs:{type:"primary"},on:{click:t.submitBlog}},[t._v("提交")])],1)},a=[],i=l(4315),o={name:"Blog",data(){return{id:this.$route.params.id,mavonValue:"",blog:{title:"",content:"",labels:[],pictures:[]},options:[]}},methods:{change(t){this.blog.content=t},imgAdd(t,e){const l=(new Date).getTime();this.blog.pictures.push({index:t,name:e.name,url:e.miniurl,timeStamp:l})},imgDel(t){this.blog.pictures=this.blog.pictures.filter((e=>e.name!=t[0]))},async submitBlog(){const t=await(0,i.zZ)({id:this.id,blog:this.blog});200===t.code?(this.$message({message:t.msg,type:"success",duration:1e3}),this.$router.push({name:"home"}),this.$destroy()):this.$message({message:t.msg,type:"error",duration:1e3})}},async created(){const t=await(0,i.g7)();this.options=t.labels;const e=await(0,i.lK)({id:this.id,isUpdate:!0});this.blog.title=e.blogDetail.title,this.mavonValue=e.blogDetail.content,this.blog.labels=e.blogDetail.labels.split(",")}},n=o,r=l(5471),c=(0,r.Z)(n,s,a,!1,null,"6f612732",null),u=c.exports}}]);
//# sourceMappingURL=39.92937616.js.map