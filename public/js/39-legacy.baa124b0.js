"use strict";(self["webpackChunkmy_blog"]=self["webpackChunkmy_blog"]||[]).push([[39],{16039:function(e,t,l){l.r(t),l.d(t,{default:function(){return g}});var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"blog"},[l("h1",[e._v("修改博客")]),l("div",{staticClass:"title"},[l("label",[e._v("博客标题")]),l("input",{directives:[{name:"model",rawName:"v-model",value:e.blog.title,expression:"blog.title"}],attrs:{type:"text"},domProps:{value:e.blog.title},on:{input:function(t){t.target.composing||e.$set(e.blog,"title",t.target.value)}}})]),l("div",{staticClass:"content"},[l("label",[e._v("博客内容")]),l("div",{staticClass:"editor"},[l("mavon-editor",{attrs:{scrollStyle:!0,ishljs:!0},on:{change:e.change,imgAdd:e.imgAdd,imgDel:e.imgDel},model:{value:e.mavonValue,callback:function(t){e.mavonValue=t},expression:"mavonValue"}})],1)]),l("div",{staticClass:"label"},[l("label",[e._v("添加标签:")]),l("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.blog.labels,callback:function(t){e.$set(e.blog,"labels",t)},expression:"blog.labels"}},e._l(e.options,(function(e){return l("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-button",{attrs:{type:"primary"},on:{click:e.submitBlog}},[e._v("提交")])],1)},a=[],s=l(76737),i=l(71939),o=(l(60483),l(54204),l(847),l(87836),l(23530),l(14797)),r={name:"Blog",data:function(){return{id:this.$route.params.id,mavonValue:"",blog:{title:"",content:"",labels:[],pictures:[]},options:[]}},methods:{change:function(e){this.blog.content=e},imgAdd:function(e,t){var l=(new Date).getTime();this.blog.pictures.push({index:e,name:t.name,url:t.miniurl,timeStamp:l})},imgDel:function(e){this.blog.pictures=this.blog.pictures.filter((function(t){return t.name!=e[0]}))},submitBlog:function(){var e=this;return(0,i.Z)((0,s.Z)().mark((function t(){var l;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.zZ)({id:e.id,blog:e.blog});case 2:l=t.sent,200===l.code?(e.$message({message:l.msg,type:"success",duration:1e3}),e.$router.push({name:"home"}),e.$destroy()):e.$message({message:l.msg,type:"error",duration:1e3});case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return(0,i.Z)((0,s.Z)().mark((function t(){var l,n;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.g7)();case 2:return l=t.sent,e.options=l.labels,t.next=6,(0,o.lK)({id:e.id,isUpdate:!0});case 6:n=t.sent,e.blog.title=n.blogDetail.title,e.mavonValue=n.blogDetail.content,e.blog.labels=n.blogDetail.labels.split(",");case 10:case"end":return t.stop()}}),t)})))()}},u=r,c=l(35471),m=(0,c.Z)(u,n,a,!1,null,"6f612732",null),g=m.exports}}]);
//# sourceMappingURL=39-legacy.baa124b0.js.map